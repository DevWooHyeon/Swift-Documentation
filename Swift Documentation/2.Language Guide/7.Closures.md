# Closures (클로저)

명명된 함수를 생성하지 않고 함께 실행되는 코드 그룹입니다.

클로저 (Closures) 는 코드에서 전달하고 사용할 수 있는 자체 포함된 기능 블럭입니다.

Swift 의 클로저는 다른 프로그래밍 언어의 클로저, 익명 함수, 람다 및 블럭과 유사합니다.

#

클로저는 정의된 컨텍스트에서 모든 상수 및 변수에 대한 참조를 캡처하고 저장할 수 있습니다.

이는 해당 상수와 변수를 폐쇄 (closing over) 하는 것으로 알려져 있습니다.

Swift 는 캡처에 대한 모든 메모리 관리를 처리합니다.

> Note    
> 캡처에 대한 개념이 익숙하지 않더라도 걱정하지 마세요.
> 아래 [캡처값 (Capturing Values)]() 에 자세히 설명되어 있습니다.

#

[함수 (Functinos)]() 에서 소개한 전역 및 중첩 함수는 클로저의 특별한 케이스 입니다.

클로저는 3가지 형태 중 하나를 취합니다.

- 전역 함수는 이름을 가지고 어떠한 값도 캡처하지 않는 클로저입니다.

- 중첩 함수는 이름을 가지고 둘러싼 함수에서 값을 캡처할 수 있는 클로저입니다.

- 클로저 표현식은 주변 컨텍스트에서 값을 캡처할 수 있는 경량 구문으로 작성된 이름이 없는 클로저 입니다.

#

Swift 의 클로저 표현식은 일반 시나리오에서 간결하고 복잡하지 않은 구문을 장려하는 최적화를 통해 깔끔하고 명확한 스타일을 가지고 있습니다.

이러한 최적화에는 다음이 포함됩니다.

- 컨텍스트에서 파라미터와 반환값 타입 추론

- 단일 표현식 클로저의 암시적 반환

- 단축 인수 이름

- 후행 클로저 구문

<br>

## 클로저 표현식 (Closure Expressions)

[중첩 함수 (Nested Functions)]() 에서 소개된 중첩 함수는 자체 포함된 코드 블럭을 더 큰 함수의 일부로 명명하고 정의하는 편리한 수단입니다.

그러나 완전한 선언과 이름 없이 함수형 구문의 더 짧은 버전을 작성하는 것이 유용한 경우가 있습니다.

이는 함수를 하나 이상의 인수로 사용하는 함수 또는 메서드로 작업할 때 특히 그렇습니다.

#

클로저 표현식 (Closure expressions) 은 간단하고 집중된 구문으로 인라인 클로저를 작성하는 방법입니다.

클로저 표현식은 명확성이나 의도를 잃지 않고 단축된 형식으로 클로저를 작성하기 위한 여러 구문 최적화를 제공합니다.

아래의 클로저 표현식 예제는 여러 반복을 통해 `sorted(by:)` 메서드의 단일 예제를 구체화하는 최적화를 나타냅니다.

각 예제는 동일한 기능을 보다 간결한 방식으로 표현합니다.

<br>

### 정렬 메서드 (The Sorted Method)

Swift 의 표준 라이브러리는 사용자가 제공하는 정렬 클로저의 출력을 기반으로 알려진 타입의 값 배열을 정렬하는 `sorted(by:)` 라는 메서드를 제공합니다.

정렬 프로세스가 완료되면 `sorted(by:)` 메서드는 원본 배열과 동일한 타입 및 크기의 새 배열을 반환하며 해당 요소는 올바른 정렬 순서로 반환됩니다.

기존 배열은 `sorted(by:)` 메서드에 의해 수정되지 않습니다.

#

아래 예제의 클로저 표현식은 `sorted(by:)` 메서드를 사용하여 `String` 값 배열을 알파벳 역순으로 정렬합니다.

정렬하기 위한 초기 배열은 아래와 같습니다.

~~~ swift
let names = ["Chris", "Alex", "Ewa", "Barry", "Daniella"]
~~~

`sorted(by:)` 메서드는 배열의 내용과 동일한 타입의 두 인수를 사용하는 클로저를 허용하고 값이 정렬된 후 첫번째 값이 두번째 값 앞이나 뒤에 표시되어야 하는지를 나타내는 `Bool` 값을 반환합니다.

정렬 클로저는 첫번째 값이 두번째 값 앞에 나타나야 하는 경우 `true` 를 반환하고 그렇지 않으면 `false` 를 반환해야 합니다.

#

이 예제는 `String` 값의 배열을 정렬하므로 정렬 클로저는 `(String, String) -> Bool` 타입의 함수여야 합니다.

정렬 클로저를 제공하는 한가지 방법은 올바른 타입의 일반 함수를 작성하고 `sorted(by:)` 메서드에 인수로 전달하는 것입니다.

~~~ swift
func backward(_ s1: String, _ s2: String) -> Bool {
    return s1 > s2
}
var reversedNames = names.sorted(by: backward)
// reversedNames is equal to ["Ewa", "Daniella", "Chris", "Barry", "Alex"]
~~~

첫번째 문자열 (`s1`) 이 두번째 문자열 (`s2`) 보다 크다면 `backward(_:_:)` 함수는 `true` 를 반환하여 정렬된 배열에서 `s1` 이 `s2` 앞에 나타나야 함을 의미합니다.

문자열의 문자가 "더 크다" 는 "알파벳 순으로 더 뒤에 나타난다" 는 의미입니다.

이것은 문자 `B` 가 문자 `A` 보다 "더 크다" 이고 문자열 `"Tom"` 은 문자열 `"Tim"` 보다 크다는 것을 의미합니다.

이렇게 하면 `"Alex"` 앞에 `"Barry"` 가 배치되는 등 알파벳 역순 정렬이 제공됩니다.

#

그러나 이것은 본질적으로 단일 표현식 함수 (`a > b`) 를 작성하는 다소 긴 방식입니다.

이 예제에서는 클로저 표현식 구문을 사용하여 정렬 클로저를 인라인으로 작성하는 것이 좋습니다.

<br>

### 클로저 표현식 구문 (Closure Expression Syntax)

클로저 표현식 구문의 일반적인 형식은 다음과 같습니다.

~~~ swift
{ (<#parameters#>) -> <#return type#> in
   <#statements#>
}
~~~






























***

### ⬅️ [Functions](https://github.com/Developer-Nova/Swift-Documentation/blob/main/Swift%20Documentation/2.Language%20Guide/6.Functions.md)

### ➡️ [Enumerations](https://github.com/Developer-Nova/Swift-Documentation/blob/main/Swift%20Documentation/2.Language%20Guide/8.Enumerations.md)
